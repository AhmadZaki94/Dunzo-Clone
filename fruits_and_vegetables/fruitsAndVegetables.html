<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./fruitsAndVegetables.css">
</head>
<body>
    <div id=nb><img src="https://resources.dunzo.com/web-assets/prod/_next/static/images/logo-4d2d81aefcf296bc100d9edc114c2ea5.png" alt=""></div>
    <div id="head">  <h2>Fresh Fruits</h2> <h2>Fresh Vegetables</h2>   <h2>Your Cart</h2></div>
    <div id="fandv">
    <div id="fruitss">
      
    </div>
   
    <div id="vegetabless">
       
    </div>
    <div id="fvCart">
     
        <h2 id="item"></h2>
       
        <img src="https://resources.dunzo.com/web-assets/prod/_next/static/images/no-items-in-cart-7e84056f44993b68d14184f9b2992af7.png" alt="">
        <ul id="ful"></ul>
        <button  id="co"></button>
    </div>
   
    </div>
</body>
<script type="module">
   
    let n=0;
    let sum=0;
  let fruitImages=document.querySelector("#fruitss");
  let vegetablesImages=document.querySelector("#vegetabless");
  
let co=document.querySelector("#co");
co.addEventListener("click",proceed)
function proceed(){
    window.location.href="../cart/cart.html";
    
}

let obj={};
let arrOffv=[]
  import {veggies,fruits} from "./fruitsAndVegetables.js"
fruits.forEach(el=>{
    let div=document.createElement("div");
    let button=document.createElement("button");
    let div2=document.createElement("div");
    let img=document.createElement("img");
    let fh=document.createElement("h4");
    img.src=el.image;
    let h4=document.createElement("h4")
    let rn=Math.floor(Math.random()*100)
    h4.textContent=`₹${rn} for 1 kg`
    fh.textContent=el.selection2;
    button.textContent="+ ADD"
    div2.append(fh,h4,button)
    div.append(img,div2);
    fruitImages.append(div);
    button.addEventListener("click",cta)
    function cta(){
        n+=1;
        sum+=rn;
        fvCart.textContent=`${n} Item`
        co.textContent=`₹${sum} Checkout`
        localStorage.setItem("NOI",`${n}`)
localStorage.setItem("SOI",`${sum}`)
        let rem=document.createElement("button")
        rem.textContent="Remove"
        rem.addEventListener("click",remo);
        function remo(){
            localStorage.removeItem(`Item${n}`)
         
            li.remove()
            n-=1;
            sum-=rn;
            localStorage.setItem("NOI",`${n}`)
localStorage.setItem("SOI",`${sum}`)
            fvCart.textContent=`${n} Item`
        co.textContent=`₹${sum} Checkout`
        if(sum==0){
    co.textContent=null;
}
          
        }
        obj={
            img:el.image,
            name:el.selection2,
            price:rn


        }
      
      
      
      localStorage.setItem(`Item${n}`,JSON.stringify(obj))
     
        let li=document.createElement("li");
       
        li.textContent=`${el.selection2} || 1 kg || ₹${rn}||`;
        li.append(rem)
        ful.append(li)
       
    
    }
   
    
})

   
co.addEventListener("click",loco)
function loco(){
            console.log("f")
        }

veggies.forEach(el=>{
    // console.log(el)
    let ful=document.querySelector("#ful")
    let button=document.createElement("button");
    let div2=document.createElement("div");
    let div=document.createElement("div");
    let img=document.createElement("img");
    let fh=document.createElement("h4");
    img.src=el.image;
    let rn=Math.floor(Math.random()*100)
    let h4=document.createElement("h4")
    h4.textContent=`₹${rn} for 1 kg`
    fh.textContent=el.selection1;
    button.textContent="+ ADD"
    button.addEventListener("click",cta)
    function cta(){
        n+=1;
        sum+=rn;
        obj={
            img:el.image,
            name:el.selection1,
            price:rn


        }
        
      
      
      
      localStorage.setItem(`Item${n}`,JSON.stringify(obj))
      localStorage.setItem("NOI",`${n}`)
localStorage.setItem("SOI",`${sum}`)
        let li=document.createElement("li");
        fvCart.textContent=`${localStorage.getItem("NOI")} Item`
        co.textContent=`₹${localStorage.getItem("SOI")} Checkout`
    let RO=JSON.parse(localStorage.getItem(`Item${n}`))

        li.textContent=`${RO.name} || 1 kg || ₹${RO.price}||`;
        let rem=document.createElement("button")
        rem.textContent="Remove"
        rem.addEventListener("click",remo);
        function remo(){
            li.remove()
            localStorage.removeItem(`Item${n}`)

            n-=1;
            
            sum-=rn;
            localStorage.setItem("SOI",`${sum}`)
            localStorage.setItem("NOI",`${n}`)
            console.log(sum,n)
            fvCart.textContent=`${n} Item`
        co.textContent=`₹${sum} Checkout`
        if(sum==0){
    co.textContent=null;
}

        
        }
       
        console.log(sum,n)
        li.append(rem)
        ful.append(li)
        console.log(n)
    
    }
    div2.append(fh,h4,button)
   div.append(img,div2);
   vegetablesImages.append(div)
  
    
})

let fvCart=document.querySelector("#item");


</script>
</html>